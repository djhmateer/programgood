<?xml version="1.0" encoding="utf-8"?>
<DayEntry xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:newtelligence-com:dasblog:runtime:data">
  <Date>2011-04-07T20:00:00-04:00</Date>
  <Entries>
    <Entry>
      <Content>&lt;p&gt;Thanks to Sangsu for this &lt;a href="http://stackoverflow.com/questions/5417220/change-ordering-in-mvc3-index-view"&gt;http://stackoverflow.com/questions/5417220/change-ordering-in-mvc3-index-view&lt;/a&gt;&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.programgood.net/content/binary/WindowsLiveWriter/SortingColumnsinMVC3_CC04/image_4.png"&gt;&lt;img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="http://www.programgood.net/content/binary/WindowsLiveWriter/SortingColumnsinMVC3_CC04/image_thumb_1.png" width="525" height="253" /&gt;&lt;/a&gt; &lt;/p&gt;  &lt;p&gt;This is a simple implementation (not using a Grid):&lt;/p&gt;  &lt;div id="codeSnippetWrapper"&gt;   &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Index(&lt;span style="color: #0000ff"&gt;string&lt;/span&gt; sortColumn, &lt;span style="color: #0000ff"&gt;bool&lt;/span&gt;? asc)&lt;br /&gt;{&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (&lt;span style="color: #0000ff"&gt;string&lt;/span&gt;.IsNullOrWhiteSpace(sortColumn))&lt;br /&gt;        sortColumn = &lt;span style="color: #006080"&gt;&amp;quot;Name&amp;quot;&lt;/span&gt;;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//if (!asc.HasValue)&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//    asc = true;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    asc = asc ?? &lt;span style="color: #0000ff"&gt;true&lt;/span&gt;; &lt;span style="color: #008000"&gt;// coalesce does same as above&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//if (sortColumn == &amp;quot;Name&amp;quot;)&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//{&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//    if (asc.Value)&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//        query = query.OrderBy(a =&amp;gt; a.Name);&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//    else&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//        query = query.OrderByDescending(a =&amp;gt; a.Name);&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//}&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//if (sortColumn == &amp;quot;IsEasternCountry&amp;quot;)&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//{&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//    if (asc.Value)&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//        query = query.OrderBy(a =&amp;gt; a.IsEasternCountry);&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//    else&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//        query = query.OrderByDescending(a =&amp;gt; a.IsEasternCountry);&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//}&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    ViewBag.sortColumn = sortColumn;&lt;br /&gt;    ViewBag.asc = asc.Value;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// Use dynamic column names for sort order&lt;/span&gt;&lt;br /&gt;    Order order = Order.By(sortColumn);&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (!asc.Value)  &lt;br /&gt;        order = order.Descending();&lt;br /&gt;    &lt;br /&gt;    IList&amp;lt;Country&amp;gt; listOfCountries = uow.Find&amp;lt;Country&amp;gt;(&lt;span style="color: #0000ff"&gt;new&lt;/span&gt; Query { Order =  order});&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(listOfCountries);&lt;br /&gt;}&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;br /&gt;Notice the Lightspeed goodness.. have commented out the code it replaced! Thanks to Ivan &lt;a href="http://stackoverflow.com/questions/5423728/mvccontrib-grid-sorting"&gt;http://stackoverflow.com/questions/5423728/mvccontrib-grid-sorting&lt;/a&gt; and the for coalesce tip above&lt;/div&gt;

&lt;p&gt;View:&lt;/p&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;table&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;tr&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;            @Html.ActionLinkWithColumnOrder(&amp;quot;Name&amp;quot;, &amp;quot;Index&amp;quot;, (string)ViewBag.sortColumn, (bool)ViewBag.asc)&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;            @Html.ActionLinkWithColumnOrder(&amp;quot;IsEasternCountry&amp;quot;, &amp;quot;Index&amp;quot;, (string)ViewBag.sortColumn, (bool)ViewBag.asc)&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;            IsWesternCountry&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;th&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;tr&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;@foreach (var item in Model) {&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;tr&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;            @Html.ActionLink(&amp;quot;Edit&amp;quot;, &amp;quot;Edit&amp;quot;, new { id=item.Id }) |&lt;br /&gt;            @Html.ActionLink(&amp;quot;Details&amp;quot;, &amp;quot;Details&amp;quot;, new { id=item.Id }) |&lt;br /&gt;            @Html.ActionLink(&amp;quot;Delete&amp;quot;, &amp;quot;Delete&amp;quot;, new { id=item.Id })&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;            @item.Name&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;            @item.IsEasternCountry&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;            @item.IsWesternCountry&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;td&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;tr&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;and a helper:&lt;/p&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;public&lt;/span&gt; &lt;span style="color: #0000ff"&gt;static&lt;/span&gt; &lt;span style="color: #0000ff"&gt;class&lt;/span&gt; HtmlExtensions&lt;br /&gt;{&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; &lt;span style="color: #0000ff"&gt;static&lt;/span&gt; MvcHtmlString ActionLinkWithColumnOrder(&lt;span style="color: #0000ff"&gt;this&lt;/span&gt; HtmlHelper helper, &lt;span style="color: #0000ff"&gt;string&lt;/span&gt; columnName, &lt;span style="color: #0000ff"&gt;string&lt;/span&gt; action, &lt;span style="color: #0000ff"&gt;string&lt;/span&gt; currentColumn, &lt;span style="color: #0000ff"&gt;bool&lt;/span&gt; currentOrder)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;object&lt;/span&gt; routeValues;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;object&lt;/span&gt; htmlAttributes = &lt;span style="color: #0000ff"&gt;null&lt;/span&gt;;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (columnName == currentColumn)&lt;br /&gt;        {&lt;br /&gt;            routeValues = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; { sortColumn = columnName, asc = !currentOrder };&lt;br /&gt;            htmlAttributes = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; { @&lt;span style="color: #0000ff"&gt;class&lt;/span&gt; = currentOrder ? &lt;span style="color: #006080"&gt;&amp;quot;sort_asc&amp;quot;&lt;/span&gt; : &lt;span style="color: #006080"&gt;&amp;quot;sort_desc&amp;quot;&lt;/span&gt; };&lt;br /&gt;        }&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;else&lt;/span&gt;&lt;br /&gt;        {&lt;br /&gt;            routeValues = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; { sortColumn = columnName };&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; helper.ActionLink(columnName, action, routeValues, htmlAttributes);&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;</Content>
      <Created>2011-04-07T22:32:46.925-04:00</Created>
      <Modified>2011-04-08T00:33:13.26875-04:00</Modified>
      <EntryId>7afe86cc-5177-4cd1-94cc-ad47d8d9aad4</EntryId>
      <Description />
      <Title>Sorting Columns in MVC3</Title>
      <Categories>LightSpeed;MVC</Categories>
      <Author>admin</Author>
      <IsPublic>true</IsPublic>
      <Syndicated>true</Syndicated>
      <ShowOnFrontPage>true</ShowOnFrontPage>
      <AllowComments>true</AllowComments>
      <Attachments />
      <Crossposts />
      <Latitude xsi:nil="true" />
      <Longitude xsi:nil="true" />
    </Entry>
  </Entries>
</DayEntry>