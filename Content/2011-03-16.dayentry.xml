<?xml version="1.0" encoding="utf-8"?>
<DayEntry xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:newtelligence-com:dasblog:runtime:data">
  <Date>2011-03-15T20:00:00-04:00</Date>
  <Entries>
    <Entry>
      <Content>&lt;p&gt;To make is easy to save, edit etc..&lt;/p&gt;  &lt;p&gt;Found that the example in FilmFestival doesnâ€™t work in MVC3&lt;/p&gt;  &lt;p&gt;To get it compiling I used:&lt;/p&gt;  &lt;div id="codeSnippetWrapper"&gt;   &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #008000"&gt;//var bindResult = bindingContext.ValueProvider[fieldName];&lt;/span&gt;&lt;br /&gt;var bindResult = bindingContext.ValueProvider.GetValue(fieldName);&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;p&gt;But then it failed when I added in:&lt;/p&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;EntityModelBinder.Register(&lt;span style="color: #0000ff"&gt;typeof&lt;/span&gt;(MvcPvAdmin.Models.LightSpeedModel1UnitOfWork).Assembly);&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;
in Global.asax&amp;#160; it bombed in BindModel.

</Content>
      <Created>2011-03-15T20:46:30.6485469-04:00</Created>
      <Modified>2011-03-15T20:46:30.6485469-04:00</Modified>
      <EntryId>b3d1a593-d733-4024-bb5c-8d10f2959eda</EntryId>
      <Description />
      <Title>LightSpeed ModelBinder</Title>
      <Categories>LightSpeed;MVC</Categories>
      <Author>admin</Author>
      <IsPublic>true</IsPublic>
      <Syndicated>true</Syndicated>
      <ShowOnFrontPage>true</ShowOnFrontPage>
      <AllowComments>true</AllowComments>
      <Attachments />
      <Crossposts />
      <Latitude xsi:nil="true" />
      <Longitude xsi:nil="true" />
    </Entry>
    <Entry>
      <Content>&lt;p&gt;A very simple example using People, full CRUD:&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_2.png"&gt;&lt;img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_thumb.png" width="454" height="323" /&gt;&lt;/a&gt; &lt;/p&gt;  &lt;p&gt;Identity is handled by the DB&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_4.png"&gt;&lt;img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_thumb_1.png" width="752" height="367" /&gt;&lt;/a&gt; &lt;/p&gt;  &lt;div id="codeSnippetWrapper"&gt;   &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;public&lt;/span&gt; &lt;span style="color: #0000ff"&gt;class&lt;/span&gt; PeopleController : Controller&lt;br /&gt;{&lt;br /&gt;    LightSpeedContext&amp;lt;LightSpeedModel1UnitOfWork&amp;gt; _context = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; LightSpeedContext&amp;lt;LightSpeedModel1UnitOfWork&amp;gt;(&lt;span style="color: #006080"&gt;&amp;quot;Default&amp;quot;&lt;/span&gt;);&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Index()&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = _context.CreateUnitOfWork())&lt;br /&gt;        {&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(uow.People.ToList());&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Details/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Details(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = _context.CreateUnitOfWork())&lt;br /&gt;        {&lt;br /&gt;            Person person = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Create&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Create()&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View();&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// POST: /People/Create&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    [HttpPost]&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Create(Person person)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = _context.CreateUnitOfWork())&lt;br /&gt;        {&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (!ModelState.IsValid)&lt;br /&gt;                &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;&lt;br /&gt;            uow.Add(person);&lt;br /&gt;            uow.SaveChanges();&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; RedirectToAction(&lt;span style="color: #006080"&gt;&amp;quot;Index&amp;quot;&lt;/span&gt;);&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Edit/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Edit(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = _context.CreateUnitOfWork())&lt;br /&gt;        {&lt;br /&gt;            Person person = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// POST: /People/Edit/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    [HttpPost]&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Edit(Person person, &lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (ModelState.IsValid)&lt;br /&gt;        {&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = _context.CreateUnitOfWork())&lt;br /&gt;            {&lt;br /&gt;                Person personToUpdateFromDb = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;&lt;br /&gt;                personToUpdateFromDb.Name = person.Name;&lt;br /&gt;                personToUpdateFromDb.Age = person.Age;&lt;br /&gt;                personToUpdateFromDb.CountryId = person.CountryId;&lt;br /&gt;&lt;br /&gt;                uow.SaveChanges();&lt;br /&gt;            }&lt;br /&gt;&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; RedirectToAction(&lt;span style="color: #006080"&gt;&amp;quot;Index&amp;quot;&lt;/span&gt;);&lt;br /&gt;        }&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; RedirectToAction(&lt;span style="color: #006080"&gt;&amp;quot;Index&amp;quot;&lt;/span&gt;);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Delete/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Delete(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = _context.CreateUnitOfWork())&lt;br /&gt;        {&lt;br /&gt;            Person person = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// POST: /People/Delete/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    [HttpPost]&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Delete(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id, FormCollection collection)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = _context.CreateUnitOfWork())&lt;br /&gt;        {&lt;br /&gt;            Person personToDelete = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;            uow.Remove(personToDelete);&lt;br /&gt;            uow.SaveChanges();&lt;br /&gt;        }&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; RedirectToAction(&lt;span style="color: #006080"&gt;&amp;quot;Index&amp;quot;&lt;/span&gt;);&lt;br /&gt;    }&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3&gt;Validation&lt;/h3&gt;

&lt;p&gt;&lt;a href="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_6.png"&gt;&lt;img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_thumb_2.png" width="752" height="367" /&gt;&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Name is not nullable, and must by less or equal to 5 in length&lt;/p&gt;

&lt;p&gt;Age is nullable.&lt;/p&gt;

&lt;p&gt;&lt;a href="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_8.png"&gt;&lt;img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://www.programgood.net/content/binary/WindowsLiveWriter/LightSpeedandMVC3Simple_AEE3/image_thumb_3.png" width="469" height="340" /&gt;&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;No code required to get this working.&lt;/p&gt;

&lt;h3&gt;Abstracting using statement&lt;/h3&gt;

&lt;p&gt;In Global.asax&lt;/p&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;internal&lt;/span&gt; &lt;span style="color: #0000ff"&gt;static&lt;/span&gt; &lt;span style="color: #0000ff"&gt;readonly&lt;/span&gt; LightSpeedContext&amp;lt;MvcPvAdmin.Models.LightSpeedModel1UnitOfWork&amp;gt; LightSpeedDataContext = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; LightSpeedContext&amp;lt;MvcPvAdmin.Models.LightSpeedModel1UnitOfWork&amp;gt;(&lt;span style="color: #006080"&gt;&amp;quot;Default&amp;quot;&lt;/span&gt;);&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;p&gt;and a helper base class for controllers:&lt;/p&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;public&lt;/span&gt; &lt;span style="color: #0000ff"&gt;class&lt;/span&gt; MvcPvAdminController : Controller&lt;br /&gt;{&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;private&lt;/span&gt; &lt;span style="color: #0000ff"&gt;const&lt;/span&gt; &lt;span style="color: #0000ff"&gt;string&lt;/span&gt; UNIT_OF_WORK = &lt;span style="color: #006080"&gt;&amp;quot;__UnitOfWork__&amp;quot;&lt;/span&gt;;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;private&lt;/span&gt; UnitOfWorkScopeBase&amp;lt;MvcPvAdmin.Models.LightSpeedModel1UnitOfWork&amp;gt; _unitOfWorkScope;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; UnitOfWorkScopeBase&amp;lt;MvcPvAdmin.Models.LightSpeedModel1UnitOfWork&amp;gt; UnitOfWorkScope&lt;br /&gt;    {&lt;br /&gt;        get&lt;br /&gt;        {&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (_unitOfWorkScope == &lt;span style="color: #0000ff"&gt;null&lt;/span&gt; &amp;amp;&amp;amp; System.Web.HttpContext.Current != &lt;span style="color: #0000ff"&gt;null&lt;/span&gt;)&lt;br /&gt;            {&lt;br /&gt;                _unitOfWorkScope = System.Web.HttpContext.Current.Items[UNIT_OF_WORK] &lt;span style="color: #0000ff"&gt;as&lt;/span&gt; PerRequestUnitOfWorkScope&amp;lt;MvcPvAdmin.Models.LightSpeedModel1UnitOfWork&amp;gt;;&lt;br /&gt;            }&lt;br /&gt;&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (_unitOfWorkScope == &lt;span style="color: #0000ff"&gt;null&lt;/span&gt;)&lt;br /&gt;            {&lt;br /&gt;                _unitOfWorkScope = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; PerRequestUnitOfWorkScope&amp;lt;MvcPvAdmin.Models.LightSpeedModel1UnitOfWork&amp;gt;(MvcApplication.LightSpeedDataContext);&lt;br /&gt;&lt;br /&gt;                &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (System.Web.HttpContext.Current != &lt;span style="color: #0000ff"&gt;null&lt;/span&gt;)&lt;br /&gt;                {&lt;br /&gt;                    System.Web.HttpContext.Current.Items[UNIT_OF_WORK] = _unitOfWorkScope;&lt;br /&gt;                }&lt;br /&gt;            }&lt;br /&gt;&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; _unitOfWorkScope;&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;protected&lt;/span&gt; MvcPvAdmin.Models.LightSpeedModel1UnitOfWork uow&lt;br /&gt;    {&lt;br /&gt;        get { &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; UnitOfWorkScope.Current; }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;protected&lt;/span&gt; &lt;span style="color: #0000ff"&gt;override&lt;/span&gt; &lt;span style="color: #0000ff"&gt;void&lt;/span&gt; OnResultExecuted(ResultExecutedContext filterContext)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (_unitOfWorkScope != &lt;span style="color: #0000ff"&gt;null&lt;/span&gt;)&lt;br /&gt;        {&lt;br /&gt;            _unitOfWorkScope.Dispose();&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;base&lt;/span&gt;.OnResultExecuted(filterContext);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; &lt;span style="color: #0000ff"&gt;void&lt;/span&gt; Dispose()&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (_unitOfWorkScope != &lt;span style="color: #0000ff"&gt;null&lt;/span&gt;)&lt;br /&gt;        {&lt;br /&gt;            _unitOfWorkScope.Dispose();&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;base&lt;/span&gt;.Dispose();&lt;br /&gt;    }&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;p&gt;so here is my newly updates Controller:&lt;/p&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;public&lt;/span&gt; &lt;span style="color: #0000ff"&gt;class&lt;/span&gt; PeopleController : MvcPvAdminController&lt;br /&gt;{&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Index()&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(uow.People.ToList());&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Details/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Details(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        Person person = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Create&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Create()&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View();&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// POST: /People/Create&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    [HttpPost]&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Create(Person person)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (!ModelState.IsValid)&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;&lt;br /&gt;        uow.Add(person);&lt;br /&gt;        uow.SaveChanges();&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; RedirectToAction(&lt;span style="color: #006080"&gt;&amp;quot;Index&amp;quot;&lt;/span&gt;);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Edit/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Edit(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        Person person = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// POST: /People/Edit/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    [HttpPost]&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Edit(Person person, &lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;if&lt;/span&gt; (!ModelState.IsValid)&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;&lt;br /&gt;        Person personToUpdateFromDb = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;&lt;br /&gt;        personToUpdateFromDb.Name = person.Name;&lt;br /&gt;        personToUpdateFromDb.Age = person.Age;&lt;br /&gt;        personToUpdateFromDb.CountryId = person.CountryId;&lt;br /&gt;&lt;br /&gt;        uow.SaveChanges();&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; RedirectToAction(&lt;span style="color: #006080"&gt;&amp;quot;Index&amp;quot;&lt;/span&gt;);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// GET: /People/Delete/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Delete(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id)&lt;br /&gt;    {&lt;br /&gt;        Person person = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #008000"&gt;// POST: /People/Delete/5&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;    [HttpPost]&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Delete(&lt;span style="color: #0000ff"&gt;int&lt;/span&gt; id, FormCollection collection)&lt;br /&gt;    {&lt;br /&gt;        Person personToDelete = uow.People.Single(p =&amp;gt; p.Id == id);&lt;br /&gt;        uow.Remove(personToDelete);&lt;br /&gt;        uow.SaveChanges();&lt;br /&gt;        &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; RedirectToAction(&lt;span style="color: #006080"&gt;&amp;quot;Index&amp;quot;&lt;/span&gt;);&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;</Content>
      <Created>2011-03-15T20:39:44.9195045-04:00</Created>
      <Modified>2011-03-15T20:39:44.9195045-04:00</Modified>
      <EntryId>b75df337-b764-4f6d-b048-2cb4a0f2f8ea</EntryId>
      <Description />
      <Title>LightSpeed and MVC3 â€“ Simple</Title>
      <Categories>LightSpeed;MVC</Categories>
      <Author>admin</Author>
      <IsPublic>true</IsPublic>
      <Syndicated>true</Syndicated>
      <ShowOnFrontPage>true</ShowOnFrontPage>
      <AllowComments>true</AllowComments>
      <Attachments />
      <Crossposts />
      <Latitude xsi:nil="true" />
      <Longitude xsi:nil="true" />
    </Entry>
    <Entry>
      <Content>&lt;p&gt;Html.DropDownListFor â€“ havenâ€™t figured this out yet&lt;/p&gt;  &lt;p&gt;&lt;a href="http://stackoverflow.com/questions/1297399/populating-asp-net-mvc-dropdownlist"&gt;http://stackoverflow.com/questions/1297399/populating-asp-net-mvc-dropdownlist&lt;/a&gt;&lt;/p&gt;  &lt;p&gt;MvcScaffold does it â€“ however a bit obscure&lt;/p&gt;  &lt;h3&gt;ViewBag&lt;/h3&gt;  &lt;div&gt;   &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #008000"&gt;//&lt;/span&gt;&lt;br /&gt;&lt;span style="color: #008000"&gt;// GET: /People/Create&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style="color: #0000ff"&gt;public&lt;/span&gt; ActionResult Create()&lt;br /&gt;{&lt;br /&gt;    ViewBag.Countries = uow.Countries.OrderBy(c =&amp;gt; c.Name).ToList();&lt;br /&gt;    var person = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; Person();&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;return&lt;/span&gt; View(person);&lt;br /&gt;}&lt;/pre&gt;
&lt;/div&gt;

&lt;div&gt;&amp;#160;&lt;/div&gt;

&lt;div&gt;and in the view:&lt;/div&gt;

&lt;div&gt;&amp;#160;&lt;/div&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&amp;lt;div &lt;span style="color: #0000ff"&gt;class&lt;/span&gt;=&lt;span style="color: #006080"&gt;&amp;quot;editor-field&amp;quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;@Html.DropDownList(&lt;span style="color: #006080"&gt;&amp;quot;CountryId&amp;quot;&lt;/span&gt;,&lt;br /&gt;            &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; SelectList(ViewBag.Countries &lt;span style="color: #0000ff"&gt;as&lt;/span&gt; System.Collections.IEnumerable,&lt;br /&gt;            &lt;span style="color: #006080"&gt;&amp;quot;Id&amp;quot;&lt;/span&gt;, &lt;span style="color: #006080"&gt;&amp;quot;Name&amp;quot;&lt;/span&gt;, Model.CountryId))&lt;br /&gt;&amp;lt;/div&amp;gt;&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;div&gt;&lt;a href="http://www.programgood.net/content/binary/WindowsLiveWriter/DropDownlistinMVC3_CFE5/image_2.png"&gt;&lt;img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://www.programgood.net/content/binary/WindowsLiveWriter/DropDownlistinMVC3_CFE5/image_thumb.png" width="434" height="142" /&gt;&lt;/a&gt; &lt;/div&gt;

&lt;div&gt;The FK relation is Person.CountryId&lt;/div&gt;

&lt;div&gt;&amp;#160;&lt;/div&gt;

&lt;div&gt;However in LightSpeed all the PKâ€™s are called .Id&lt;/div&gt;</Content>
      <Created>2011-03-15T22:32:47.5045951-04:00</Created>
      <Modified>2011-03-15T22:32:47.5045951-04:00</Modified>
      <EntryId>824c5e9a-fc8e-4a51-83b5-254d3c282f15</EntryId>
      <Description />
      <Title>DropDown list in MVC3</Title>
      <Categories>LightSpeed;MVC</Categories>
      <Author>admin</Author>
      <IsPublic>true</IsPublic>
      <Syndicated>true</Syndicated>
      <ShowOnFrontPage>true</ShowOnFrontPage>
      <AllowComments>true</AllowComments>
      <Attachments />
      <Crossposts />
      <Latitude xsi:nil="true" />
      <Longitude xsi:nil="true" />
    </Entry>
  </Entries>
</DayEntry>