<?xml version="1.0" encoding="utf-8"?>
<DayEntry xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:newtelligence-com:dasblog:runtime:data">
  <Date>2010-10-13T20:00:00-04:00</Date>
  <Entries>
    <Entry>
      <Content>&lt;p&gt;I’ve been testing out this ORM from Mindscape – &lt;a href="http://www.mindscape.co.nz"&gt;www.mindscape.co.nz&lt;/a&gt;.&amp;#160; &lt;/p&gt;  &lt;p&gt;Here is App.config for both projects&lt;/p&gt;  &lt;div id="codeSnippetWrapper"&gt;   &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;&lt;span style="color: #0000ff"&gt;&amp;lt;?&lt;/span&gt;&lt;span style="color: #800000"&gt;xml&lt;/span&gt; &lt;span style="color: #ff0000"&gt;version&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;1.0&amp;quot;&lt;/span&gt;?&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;configuration&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;configSections&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;section&lt;/span&gt; &lt;span style="color: #ff0000"&gt;name&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;lightSpeedContexts&amp;quot;&lt;/span&gt;&lt;br /&gt;             &lt;span style="color: #ff0000"&gt;type&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;Mindscape.LightSpeed.Configuration.LightSpeedConfigurationSection, Mindscape.LightSpeed&amp;quot;&lt;/span&gt; &lt;span style="color: #0000ff"&gt;/&amp;gt;&lt;/span&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;configSections&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;startup&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;supportedRuntime&lt;/span&gt; &lt;span style="color: #ff0000"&gt;version&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;v4.0&amp;quot;&lt;/span&gt; &lt;span style="color: #ff0000"&gt;sku&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;.NETFramework,Version=v4.0&amp;quot;&lt;/span&gt;&lt;span style="color: #0000ff"&gt;/&amp;gt;&lt;/span&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;startup&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;connectionStrings&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;add&lt;/span&gt; &lt;span style="color: #ff0000"&gt;name&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;Dev&amp;quot;&lt;/span&gt; &lt;span style="color: #ff0000"&gt;connectionString&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;data source=.\sqlexpress;Integrated Security=SSPI;initial catalog=LSTest&amp;quot;&lt;/span&gt; &lt;span style="color: #ff0000"&gt;providerName&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;System.Data.SqlClient&amp;quot;&lt;/span&gt;&lt;span style="color: #0000ff"&gt;/&amp;gt;&lt;/span&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;connectionStrings&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;lightSpeedContexts&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;    &lt;span style="color: #0000ff"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color: #800000"&gt;add&lt;/span&gt; &lt;span style="color: #ff0000"&gt;name&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;default&amp;quot;&lt;/span&gt;&lt;br /&gt;         &lt;span style="color: #ff0000"&gt;connectionStringName&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;Dev&amp;quot;&lt;/span&gt;&lt;br /&gt;         &lt;span style="color: #ff0000"&gt;dataProvider&lt;/span&gt;&lt;span style="color: #0000ff"&gt;=&amp;quot;SqlServer2005&amp;quot;&lt;/span&gt;&lt;span style="color: #0000ff"&gt;/&amp;gt;&lt;/span&gt;&lt;br /&gt;  &lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;lightSpeedContexts&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;  &lt;br /&gt;&lt;span style="color: #0000ff"&gt;&amp;lt;/&lt;/span&gt;&lt;span style="color: #800000"&gt;configuration&lt;/span&gt;&lt;span style="color: #0000ff"&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;

&lt;p&gt;had to remember to turn identity property on Country to:&amp;#160; IdentityColumn&lt;/p&gt;

&lt;p&gt;as I’m making the database keep track of its new identities ie auto inc.&amp;#160; In this example I’m using ints.&lt;/p&gt;

&lt;h4&gt;Unit Test Code (thanks PeterJ)&lt;/h4&gt;

&lt;div id="codeSnippetWrapper"&gt;
  &lt;pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &amp;#39;Courier New&amp;#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet"&gt;[TestMethod]&lt;br /&gt;       &lt;span style="color: #0000ff"&gt;public&lt;/span&gt; &lt;span style="color: #0000ff"&gt;void&lt;/span&gt; Can_CRUD_Countries()&lt;br /&gt;       {&lt;br /&gt;           LightSpeedContext context = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; LightSpeedContext(&lt;span style="color: #006080"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;);&lt;br /&gt;           &lt;span style="color: #0000ff"&gt;using&lt;/span&gt; (var uow = context.CreateUnitOfWork())&lt;br /&gt;           {&lt;br /&gt;               &lt;span style="color: #008000"&gt;// get all &lt;/span&gt;&lt;br /&gt;               var results = uow.Find&amp;lt;Country&amp;gt;();&lt;br /&gt;               &lt;span style="color: #0000ff"&gt;int&lt;/span&gt; count = results.Count();&lt;br /&gt;&lt;br /&gt;               Assert.IsNotNull(results, &lt;span style="color: #006080"&gt;&amp;quot;results are null&amp;quot;&lt;/span&gt;);&lt;br /&gt;&lt;br /&gt;               Country country = &lt;span style="color: #0000ff"&gt;new&lt;/span&gt; Country { Name = &lt;span style="color: #006080"&gt;&amp;quot;hhh&amp;quot;&lt;/span&gt; };&lt;br /&gt;               uow.Add(country);&lt;br /&gt;               uow.SaveChanges();&lt;br /&gt;               Assert.IsTrue(country.Id &amp;gt; 0, &lt;span style="color: #006080"&gt;&amp;quot;id not updated&amp;quot;&lt;/span&gt;);&lt;br /&gt;&lt;br /&gt;               &lt;span style="color: #008000"&gt;// get all again - should have 1 more&lt;/span&gt;&lt;br /&gt;               results = uow.Find&amp;lt;Country&amp;gt;();&lt;br /&gt;               Assert.IsTrue(results.Count == count + 1, &lt;span style="color: #006080"&gt;&amp;quot;should be 1 more record and there isn't&amp;quot;&lt;/span&gt;);&lt;br /&gt;&lt;br /&gt;               &lt;span style="color: #008000"&gt;// edit the record&lt;/span&gt;&lt;br /&gt;               country.IsWesternCountry = &lt;span style="color: #0000ff"&gt;true&lt;/span&gt;;&lt;br /&gt;               uow.SaveChanges();&lt;br /&gt;&lt;br /&gt;               &lt;span style="color: #008000"&gt;// read it back and double check&lt;/span&gt;&lt;br /&gt;               country = uow.FindById&amp;lt;Country&amp;gt;(country.Id);&lt;br /&gt;               Assert.IsNotNull(country, &lt;span style="color: #006080"&gt;&amp;quot;could not find country&amp;quot;&lt;/span&gt;);&lt;br /&gt;&lt;br /&gt;               Assert.IsNotNull(country.IsWesternCountry, &lt;span style="color: #006080"&gt;&amp;quot;oh boy, update didnt work&amp;quot;&lt;/span&gt;);&lt;br /&gt;&lt;br /&gt;               &lt;span style="color: #008000"&gt;//// and finally delete&lt;/span&gt;&lt;br /&gt;               uow.Remove(country);&lt;br /&gt;               uow.SaveChanges();&lt;br /&gt;&lt;br /&gt;               &lt;span style="color: #008000"&gt;// get all again - should have 1 more&lt;/span&gt;&lt;br /&gt;               results = uow.Find&amp;lt;Country&amp;gt;();&lt;br /&gt;               Assert.IsTrue(results.Count == count, &lt;span style="color: #006080"&gt;&amp;quot;should be 1 less record and there isn't&amp;quot;&lt;/span&gt;);&lt;br /&gt;           }&lt;br /&gt;&lt;br /&gt;       }&lt;/pre&gt;

  &lt;br /&gt;&lt;/div&gt;</Content>
      <Created>2010-10-13T22:03:01.575875-04:00</Created>
      <Modified>2010-10-13T22:03:01.575875-04:00</Modified>
      <EntryId>dcb1bd71-cc6e-40f2-a780-b8973f188b55</EntryId>
      <Description />
      <Title>LightSpeed</Title>
      <Categories>LightSpeed</Categories>
      <Author>admin</Author>
      <IsPublic>true</IsPublic>
      <Syndicated>true</Syndicated>
      <ShowOnFrontPage>true</ShowOnFrontPage>
      <AllowComments>true</AllowComments>
      <Attachments />
      <Crossposts />
      <Latitude xsi:nil="true" />
      <Longitude xsi:nil="true" />
    </Entry>
  </Entries>
</DayEntry>